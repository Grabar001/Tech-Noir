{% extends 'base.html.twig' %}

{% block title %}Accueil - TECH NOIR{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    {{ encore_entry_link_tags('home') }}
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    {{ encore_entry_script_tags('home') }}
{% endblock %}

{% block body %}
<div class="homepage-desktop">

    {# Слайдер баннеров #}
    <section class="slideshow">
        <div class="slides">
            <img src="{{ asset('images/slideshow/Slide_1.webp') }}" alt="Slide 1">
            <img src="{{ asset('images/slideshow/Slide_2.webp') }}" alt="Slide 2">
            <img src="{{ asset('images/slideshow/Slide_3.webp') }}" alt="Slide 3">
            <img src="{{ asset('images/slideshow/Slide_4.webp') }}" alt="Slide 4">
        </div>
    </section>

    {# Категории динамически из базы #}
    <section class="categories">
        <h3>Catalogue</h3>
        <div class="category-list">
            {% for categorie in categories %}
                <div class="category">
                    <a href="{{ path('catalog', { slug: categorie.slug }) }}">
                        <img src="{{ asset('images/uploads/categories/' ~ categorie.image) }}" alt="{{ categorie.nom }}">
                        <p>{{ categorie.nom }}</p>
                    </a>
                </div>
            {% else %}
                <p>Aucune catégorie trouvée.</p>
            {% endfor %}
        </div>
    </section>

    {# Промо-блок с товарами #}
    <section class="promos">
        <h3>Promotion</h3>
        <div class="products-grid">
            {% for produit in produits %}
                <div class="product-card">
                    {% if produit.reduction %}
                        <div class="discount">-{{ produit.reduction }}%</div>
                    {% endif %}

                    <img src="{{ asset('images/uploads/produits/' ~ produit.image) }}" alt="{{ produit.nom }}">
                    <h4>{{ produit.nom }}</h4>

                    {% if produit.reduction %}
                        <p class="old-price">
                            {{ (produit.prix * 100) / (100 - produit.reduction) | round(2) }} €
                        </p>
                    {% endif %}
                    <p class="new-price">{{ produit.prix }} €</p>

                    <p class="stock">
                        {% if produit.enStock %}
                            ✅ En stock
                        {% else %}
                            ❌ Rupture
                        {% endif %}
                    </p>

                    <button>Ajouter au panier</button>
                </div>
            {% else %}
                <p>Aucun produit en promotion actuellement.</p>
            {% endfor %}
        </div>
    </section>

</div>
{% endblock %}